sequenceDiagram
    participant Usuario
    participant LegajoBancoController
    participant LegajoBancoService
    participant NovedadService
    participant LegajoBancoRepository

    Usuario->>LegajoBancoController: GET /santander/{salida}/{anho}/{mes}/{dependenciaId}/codigo/{codigoId}
    LegajoBancoController->>LegajoBancoService: findAllSantanderConCodigo(salida, anho, mes, dependenciaId, codigoId)
    LegajoBancoService->>NovedadService: findAllByCodigo(codigoId, anho, mes)
    NovedadService-->>LegajoBancoService: Lista de legajoIds
    LegajoBancoService->>LegajoBancoRepository: findAllByLegajoIdInAndAnhoAndMesAndCbuLike(legajoIds, anho, mes, "072%")
    LegajoBancoRepository-->>LegajoBancoService: Lista de LegajoBanco (Santander)
    LegajoBancoService->>LegajoBancoService: Filtrar por dependenciaId y salida
    LegajoBancoService-->>LegajoBancoController: Lista filtrada
    LegajoBancoController-->>Usuario: Lista de LegajoBanco

    Note over Usuario,LegajoBancoController: Similar flujo para /otrosbancos/{salida}/{anho}/{mes}/{dependenciaId}/codigo/{codigoId}<br/>con CBU not like "072%"